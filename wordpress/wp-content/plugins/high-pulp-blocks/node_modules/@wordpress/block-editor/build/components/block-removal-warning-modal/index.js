"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BlockRemovalWarningModal = BlockRemovalWarningModal;
var _react = require("react");
var _element = require("@wordpress/element");
var _data = require("@wordpress/data");
var _components = require("@wordpress/components");
var _i18n = require("@wordpress/i18n");
var _store = require("../../store");
var _lockUnlock = require("../../lock-unlock");
/**
 * WordPress dependencies
 */

/**
 * Internal dependencies
 */

function BlockRemovalWarningModal({
  rules
}) {
  const {
    clientIds,
    selectPrevious,
    blockNamesForPrompt,
    messageType
  } = (0, _data.useSelect)(select => (0, _lockUnlock.unlock)(select(_store.store)).getRemovalPromptData());
  const {
    clearBlockRemovalPrompt,
    setBlockRemovalRules,
    privateRemoveBlocks
  } = (0, _lockUnlock.unlock)((0, _data.useDispatch)(_store.store));

  // Load block removal rules, simultaneously signalling that the block
  // removal prompt is in place.
  (0, _element.useEffect)(() => {
    setBlockRemovalRules(rules);
    return () => {
      setBlockRemovalRules();
    };
  }, [rules, setBlockRemovalRules]);
  if (!blockNamesForPrompt) {
    return;
  }
  const message = messageType === 'templates' ? (0, _i18n._n)('Deleting this block will stop your post or page content from displaying on this template. It is not recommended.', 'Deleting these blocks will stop your post or page content from displaying on this template. It is not recommended.', blockNamesForPrompt.length) : (0, _i18n._n)('Deleting this block could break patterns on your site that have content linked to it. Are you sure you want to delete it?', 'Deleting these blocks could break patterns on your site that have content linked to them. Are you sure you want to delete them?', blockNamesForPrompt.length);
  const onConfirmRemoval = () => {
    privateRemoveBlocks(clientIds, selectPrevious, /* force */true);
    clearBlockRemovalPrompt();
  };
  return (0, _react.createElement)(_components.Modal, {
    title: (0, _i18n.__)('Be careful!'),
    onRequestClose: clearBlockRemovalPrompt,
    size: "medium"
  }, (0, _react.createElement)("p", null, message), (0, _react.createElement)(_components.__experimentalHStack, {
    justify: "right"
  }, (0, _react.createElement)(_components.Button, {
    variant: "tertiary",
    onClick: clearBlockRemovalPrompt
  }, (0, _i18n.__)('Cancel')), (0, _react.createElement)(_components.Button, {
    variant: "primary",
    onClick: onConfirmRemoval
  }, (0, _i18n.__)('Delete'))));
}
//# sourceMappingURL=index.js.map